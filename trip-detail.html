<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Netravati Peak Trek - Team Weekend Trekkers</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/pages.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="logo">
                <img src="images/logo.jpg" alt="Team Weekend Trekkers" class="logo-img">
                <span class="logo-text">Team Weekend Trekkers</span>
            </a>
            <button class="nav-toggle" aria-label="Toggle navigation">
                <span class="hamburger"></span>
            </button>
            <ul class="nav-menu">
                <li><a href="index.html">Home</a></li>
                <li><a href="trips.html" class="active">Trips</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a href="https://wa.me/7019235581" target="_blank" class="btn-nav">Book Now</a></li>
            </ul>
        </div>
    </nav>

    <!-- Trip Hero with Gallery - TWT Style -->
    <section class="trip-hero-gallery" id="tripHeroGallery">
        <div class="container">
            <div class="breadcrumb">
                <a href="index.html">Home</a> / <a href="trips.html">Trips</a> / <span id="breadcrumbTitle">Netravati Peak Trek</span>
            </div>
            <div class="gallery-wrapper">
                <div class="gallery-main" onclick="openLightbox(0)">
                    <img src="images/trips/netravati.jpg" alt="Trip Main Image" id="galleryMainImg">
                </div>
                <div class="gallery-side">
                    <div class="gallery-item" onclick="openLightbox(1)">
                        <img src="images/trips/netravati.jpg" alt="Trek Photo 2" id="galleryImg1">
                    </div>
                    <div class="gallery-item" onclick="openLightbox(2)">
                        <img src="images/trips/netravati.jpg" alt="Trek Photo 3" id="galleryImg2">
                    </div>
                    <div class="gallery-item" onclick="openLightbox(3)">
                        <img src="images/trips/netravati.jpg" alt="Trek Photo 4" id="galleryImg3">
                    </div>
                    <div class="gallery-item gallery-more" onclick="openLightbox(4)">
                        <img src="images/trips/netravati.jpg" alt="Trek Photo 5" id="galleryImg4">
                        <div class="gallery-overlay">
                            <span>+3 More</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Trek At A Glance -->
    <section class="trek-glance">
        <div class="container">
            <h2>Trip at a glance</h2>
            <div class="glance-grid">
                <div class="glance-item">
                    <i class="fas fa-clock"></i>
                    <span class="glance-label">Trip duration</span>
                    <span class="glance-value" id="glanceDuration">2 days / 1 night</span>
                </div>
                <div class="glance-item">
                    <i class="fas fa-signal"></i>
                    <span class="glance-label">Difficulty level</span>
                    <span class="glance-value" id="glanceDifficulty">Easy to Moderate</span>
                </div>
                <div class="glance-item">
                    <i class="fas fa-mountain"></i>
                    <span class="glance-label">Max altitude</span>
                    <span class="glance-value" id="glanceAltitude">4640 ft</span>
                </div>
                <div class="glance-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <span class="glance-label">Location</span>
                    <span class="glance-value" id="glanceLocation">Western Ghats</span>
                </div>
                <div class="glance-item">
                    <i class="fas fa-route"></i>
                    <span class="glance-label">Total distance</span>
                    <span class="glance-value" id="glanceDistance">12 km</span>
                </div>
                <div class="glance-item">
                    <i class="fas fa-user-friends"></i>
                    <span class="glance-label">For ages</span>
                    <span class="glance-value" id="glanceAge">12+</span>
                </div>
                <div class="glance-item">
                    <i class="fas fa-users"></i>
                    <span class="glance-label">Max group size</span>
                    <span class="glance-value" id="glanceGroupSize">20 pax</span>
                </div>
                <div class="glance-item">
                    <i class="fas fa-calendar-alt"></i>
                    <span class="glance-label">Best time to go</span>
                    <span class="glance-value" id="glanceBestTime">Oct - Feb</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Lightbox Modal -->
    <div class="lightbox-modal" id="galleryLightbox">
        <button class="lightbox-close" onclick="closeLightbox()">&times;</button>
        <button class="lightbox-prev" onclick="changeImage(-1)">&#10094;</button>
        <button class="lightbox-next" onclick="changeImage(1)">&#10095;</button>
        <div class="lightbox-content">
            <img src="" alt="Gallery Image" id="lightboxImage">
        </div>
        <div class="lightbox-counter" id="imageCounter">1 / 6</div>
    </div>

    <section class="trip-details">
        <div class="container">
            <div class="trip-layout">
                <!-- Main Content -->
                <div class="trip-main">
                    <!-- Overview Cards -->
                    <div class="overview-cards">
                        <div class="overview-card">
                            <i class="fas fa-hiking"></i>
                            <span class="label">Distance</span>
                            <span class="value">15-20 km</span>
                        </div>
                        <div class="overview-card">
                            <i class="fas fa-mountain"></i>
                            <span class="label">Elevation</span>
                            <span class="value">1,420 m</span>
                        </div>
                        <div class="overview-card">
                            <i class="fas fa-signal"></i>
                            <span class="label">Difficulty</span>
                            <span class="value">Moderate</span>
                        </div>
                        <div class="overview-card">
                            <i class="fas fa-calendar-alt"></i>
                            <span class="label">Best Time</span>
                            <span class="value">Oct - Feb</span>
                        </div>
                    </div>

                    <!-- About Trek -->
                    <div class="content-section">
                        <h2>About This Trip</h2>
                        <p>Netravati Peak, nestled in the Western Ghats of Karnataka, offers one of the most rewarding weekend treks from Bangalore. This hidden gem takes you through lush forests, pristine streams, and breathtaking viewpoints that remain untouched by mass tourism.</p>
                        <p>The trek is perfect for adventure seekers looking to escape the city and immerse themselves in nature. With camping under starlit skies and waking up to misty mountain views, this is an experience you'll cherish forever.</p>
                    </div>

                    <!-- Highlights -->
                    <div class="content-section">
                        <h2>What Makes It Special</h2>
                        <ul class="highlights-list">
                            <li><i class="fas fa-check-circle"></i> Hidden waterfalls along the trail</li>
                            <li><i class="fas fa-check-circle"></i> Night camping under stars</li>
                            <li><i class="fas fa-check-circle"></i> Rare bird and wildlife spotting</li>
                            <li><i class="fas fa-check-circle"></i> Pristine streams for refreshing dips</li>
                            <li><i class="fas fa-check-circle"></i> 360° panoramic views from the peak</li>
                            <li><i class="fas fa-check-circle"></i> Away from tourist crowds</li>
                        </ul>
                    </div>

                    <!-- Itinerary -->
                    <div class="content-section">
                        <h2>Day-wise Itinerary</h2>
                        <div class="itinerary-accordion">
                            <div class="accordion-item active">
                                <div class="accordion-header">
                                    <span class="day-badge">Day 0</span>
                                    <h3>Night Departure from Bangalore</h3>
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="accordion-content">
                                    <ul>
                                        <li><strong>10:00 PM</strong> - Pickup from designated Bangalore pickup points</li>
                                        <li><strong>10:30 PM</strong> - Introduction and trip briefing in the vehicle</li>
                                        <li><strong>11:00 PM</strong> - Begin overnight journey to base camp</li>
                                        <li>Music, bonfire vibes, and getting to know fellow trekkers</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <div class="accordion-header">
                                    <span class="day-badge">Day 1</span>
                                    <h3>Trek to Summit & Camping</h3>
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="accordion-content">
                                    <ul>
                                        <li><strong>5:00 AM</strong> - Arrive at base village, freshen up</li>
                                        <li><strong>6:00 AM</strong> - Light breakfast and trek briefing</li>
                                        <li><strong>7:00 AM</strong> - Begin trek through forest trail</li>
                                        <li><strong>10:00 AM</strong> - Cross streams and waterfalls</li>
                                        <li><strong>1:00 PM</strong> - Reach campsite, packed lunch</li>
                                        <li><strong>3:00 PM</strong> - Explore nearby viewpoints</li>
                                        <li><strong>6:00 PM</strong> - Sunset views from the peak</li>
                                        <li><strong>8:00 PM</strong> - Bonfire, dinner, stargazing</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <div class="accordion-header">
                                    <span class="day-badge">Day 2</span>
                                    <h3>Sunrise, Descent & Return</h3>
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="accordion-content">
                                    <ul>
                                        <li><strong>5:30 AM</strong> - Wake up for sunrise</li>
                                        <li><strong>6:00 AM</strong> - Witness breathtaking sunrise over clouds</li>
                                        <li><strong>7:30 AM</strong> - Breakfast at campsite</li>
                                        <li><strong>8:30 AM</strong> - Begin descent</li>
                                        <li><strong>12:00 PM</strong> - Reach base, freshen up</li>
                                        <li><strong>1:00 PM</strong> - Lunch and departure</li>
                                        <li><strong>7:00 PM</strong> - Arrive back in Bangalore</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Includes/Excludes -->
                    <div class="content-section">
                        <h2>What's Included & Excluded</h2>
                        <div class="includes-grid">
                            <div class="includes-box">
                                <h3><i class="fas fa-check-circle"></i> Includes</h3>
                                <ul>
                                    <li>Bangalore to Bangalore transportation (AC vehicle)</li>
                                    <li>1 Breakfast + 1 Lunch + 1 Dinner</li>
                                    <li>Camping equipment (tents, sleeping bags)</li>
                                    <li>Experienced trek lead and support staff</li>
                                    <li>Forest entry permits</li>
                                    <li>First aid kit</li>
                                    <li>Bonfire arrangements</li>
                                </ul>
                            </div>
                            <div class="excludes-box">
                                <h3><i class="fas fa-times-circle"></i> Excludes</h3>
                                <ul>
                                    <li>Personal expenses</li>
                                    <li>Travel insurance</li>
                                    <li>Any meals not mentioned</li>
                                    <li>Tips and gratuities</li>
                                    <li>Anything not mentioned in inclusions</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Things to Carry -->
                    <div class="content-section">
                        <h2>Things to Carry</h2>
                        <div class="carry-grid">
                            <div class="carry-item"><i class="fas fa-shoe-prints"></i> Trekking shoes</div>
                            <div class="carry-item"><i class="fas fa-tint"></i> 2L water bottle</div>
                            <div class="carry-item"><i class="fas fa-lightbulb"></i> Torch/Headlamp</div>
                            <div class="carry-item"><i class="fas fa-vest"></i> Warm jacket</div>
                            <div class="carry-item"><i class="fas fa-id-card"></i> ID proof (original)</div>
                            <div class="carry-item"><i class="fas fa-cookie"></i> Energy bars/snacks</div>
                            <div class="carry-item"><i class="fas fa-capsules"></i> Personal medicines</div>
                            <div class="carry-item"><i class="fas fa-camera"></i> Camera (optional)</div>
                        </div>
                    </div>

                    <!-- Perfect For Section -->
                    <div class="content-section">
                        <h2>Perfect For</h2>
                        <div class="suitable-for-grid" id="suitableForGrid">
                            <div class="suitable-tag"><i class="fas fa-user"></i> Solo Travelers</div>
                            <div class="suitable-tag"><i class="fas fa-user-friends"></i> Friends</div>
                            <div class="suitable-tag"><i class="fas fa-star"></i> First Timers</div>
                            <div class="suitable-tag"><i class="fas fa-home"></i> Family</div>
                        </div>
                    </div>

                    <!-- Pickup Points Section -->
                    <div class="content-section">
                        <h2><i class="fas fa-map-marker-alt"></i> Bangalore Pickup Points</h2>
                        <p class="section-note">All pickups are on the night of Day 0. Please reach 15 minutes before departure time.</p>
                        <div class="pickup-table-wrapper">
                            <table class="pickup-table" id="pickupTable">
                                <thead>
                                    <tr>
                                        <th>Location</th>
                                        <th>Landmark</th>
                                        <th>Time</th>
                                        <th>Map</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Cancellation Policy Section -->
                    <div class="content-section">
                        <h2><i class="fas fa-shield-alt"></i> Cancellation Policy</h2>
                        <div class="policy-cards" id="policyCards">
                            <!-- Populated by JavaScript -->
                        </div>
                        <div class="policy-notes">
                            <p><i class="fas fa-info-circle"></i> Refunds are processed within 5-7 business days.</p>
                            <p><i class="fas fa-exchange-alt"></i> Date changes are free if requested 7+ days before the trip.</p>
                        </div>
                    </div>

                    <!-- Trek Guidelines Section -->
                    <div class="content-section">
                        <h2><i class="fas fa-clipboard-list"></i> Trip Guidelines</h2>
                        <div class="guidelines-grid" id="guidelinesGrid">
                            <!-- Populated by JavaScript -->
                        </div>
                    </div>

                    <!-- FAQ Section -->
                    <div class="content-section">
                        <h2><i class="fas fa-question-circle"></i> Frequently Asked Questions</h2>
                        <div class="faq-accordion" id="faqAccordion">
                            <!-- Populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <div class="trip-sidebar">
                    <div class="booking-card">
                        <h3>Book This Trip</h3>
                        <div class="price-display">
                            <span class="original-price" id="originalPrice">₹4,499</span>
                            <span class="current-price" id="currentPrice">₹3,499</span>
                            <span class="discount" id="discountBadge">22% OFF</span>
                        </div>
                        <form class="booking-form" id="bookingForm">
                            <div class="form-group">
                                <label>Select Date</label>
                                <select name="date" id="dateSelect" required>
                                    <option value="">Choose a date</option>
                                    <option value="Jan 4-5, 2026">Jan 4-5, 2026</option>
                                    <option value="Jan 11-12, 2026">Jan 11-12, 2026</option>
                                    <option value="Jan 18-19, 2026">Jan 18-19, 2026</option>
                                    <option value="Jan 25-26, 2026">Jan 25-26, 2026</option>
                                    <option value="Feb 1-2, 2026">Feb 1-2, 2026</option>
                                    <option value="Feb 8-9, 2026">Feb 8-9, 2026</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Number of People</label>
                                <select name="people" id="peopleCount" required>
                                    <option value="1">1 Person</option>
                                    <option value="2">2 People</option>
                                    <option value="3">3 People</option>
                                    <option value="4">4 People</option>
                                    <option value="5">5+ People</option>
                                </select>
                            </div>
                            <div class="total-price">
                                <span>Total:</span>
                                <span id="totalAmount">₹3,499</span>
                            </div>
                            <a href="checkout.html" class="btn btn-primary btn-full" id="bookNowBtn" onclick="return goToCheckout(event)">
                                Book Now
                            </a>
                        </form>
                        <div class="quick-contact">
                            <p>Have questions?</p>
                            <a href="https://wa.me/7019235581?text=Hi!%20I'm%20interested%20in%20Netravati%20Peak%20Trek" class="btn btn-whatsapp btn-full" target="_blank">
                                <i class="fab fa-whatsapp"></i> Chat on WhatsApp
                            </a>
                        </div>
                    </div>

                    <!-- UPI Payment -->
                    <div class="upi-card">
                        <h4>Quick Pay via UPI</h4>
                        <p class="upi-id" id="secureUpiDisplay">••••••b81t@ptys</p>
                        <button class="btn btn-small copy-upi" onclick="secureCopyUPI()">
                            <i class="fas fa-copy"></i> Copy UPI ID
                        </button>
                        <button class="btn btn-upi btn-full" onclick="securePayViaUPI()">
                            <i class="fas fa-mobile-alt"></i> Open UPI App
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h4>Team Weekend Trekkers</h4>
                    <p>A Travel community for the travellers, By the travellers.</p>
                    <div class="social-links">
                        <a href="https://instagram.com/teamweekendtrekkers" target="_blank"><i class="fab fa-instagram"></i></a>
                        <a href="https://wa.me/7019235581" target="_blank"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                <div class="footer-col">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="trips.html">All Trips</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Contact Us</h4>
                    <p><i class="fas fa-map-marker-alt"></i> Kalkere, Bangalore</p>
                    <p><i class="fab fa-whatsapp"></i> +91 7019235581</p>
                </div>
                <div class="footer-col">
                    <h4>Pay via UPI</h4>
                    <p class="upi-id-display">••••••b81t@ptys</p>
                    <button class="btn btn-small copy-upi" onclick="secureCopyUPI()"><i class="fas fa-copy"></i> Copy</button>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Team Weekend Trekkers. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <a href="https://wa.me/7019235581?text=Hi!%20I'm%20interested%20in%20Netravati%20Peak%20Trek" class="whatsapp-float" target="_blank" id="whatsappLink">
        <i class="fab fa-whatsapp"></i>
        <span>Chat with us</span>
    </a>

    <script src="js/main.js"></script>
    <script src="js/trips-data.js?v=1767556524"></script>
    <script>
        // Get trip from URL parameter
        function getTripFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('trip') || 'netravati';
        }

        // Update page with trip data
        function updateTripPage() {
            const tripId = getTripFromURL();
            const trip = getTripData(tripId);

            // Handle inactive trips - grey out page and disable booking
            const isInactive = trip.isActive === false;
            if (isInactive) {
                // Add inactive class to body for grey styling
                document.body.classList.add('trip-inactive-page');
                
                // Show inactive banner
                const banner = document.createElement('div');
                banner.className = 'inactive-trip-banner';
                banner.innerHTML = '<i class="fas fa-info-circle"></i> This trip is currently not available for booking. Check back soon!';
                document.querySelector('.trip-detail-section')?.prepend(banner);
                
                // Disable booking form elements
                const bookingCard = document.querySelector('.booking-card');
                if (bookingCard) {
                    bookingCard.classList.add('booking-disabled');
                    const dateSelect = document.getElementById('dateSelect');
                    const peopleCount = document.getElementById('peopleCount');
                    const bookNowBtn = document.getElementById('bookNowBtn');
                    if (dateSelect) dateSelect.disabled = true;
                    if (peopleCount) peopleCount.disabled = true;
                    if (bookNowBtn) {
                        bookNowBtn.classList.add('btn-disabled');
                        bookNowBtn.textContent = 'Coming Soon';
                        bookNowBtn.onclick = (e) => { e.preventDefault(); return false; };
                    }
                }
                
                // Disable UPI card
                const upiCard = document.querySelector('.upi-card');
                if (upiCard) upiCard.style.display = 'none';
            }

            // Update hero section
            const heroSection = document.getElementById('tripHero');
            if (heroSection) {
                heroSection.style.backgroundImage = `url('${trip.image}')`;
            }

            // Update title
            const titleEl = document.getElementById('tripTitle');
            if (titleEl) titleEl.textContent = trip.title;

            // Update document title
            document.title = `${trip.title} - Team Weekend Trekkers`;

            // Update breadcrumb
            const breadcrumbTitle = document.getElementById('breadcrumbTitle');
            if (breadcrumbTitle) breadcrumbTitle.textContent = trip.title;

            // Update gallery images - use galleryImages array if available
            const galleryImagesArray = trip.galleryImages && trip.galleryImages.length > 0 
                ? [trip.image, ...trip.galleryImages] 
                : [trip.image, trip.image, trip.image, trip.image, trip.image];
            
            // Store all gallery images globally for lightbox
            window.allGalleryImages = galleryImagesArray;
            
            const galleryMainImg = document.getElementById('galleryMainImg');
            if (galleryMainImg) galleryMainImg.src = galleryImagesArray[0] || trip.image;
            
            const galleryImg1 = document.getElementById('galleryImg1');
            if (galleryImg1) galleryImg1.src = galleryImagesArray[1] || trip.image;
            
            const galleryImg2 = document.getElementById('galleryImg2');
            if (galleryImg2) galleryImg2.src = galleryImagesArray[2] || trip.image;
            
            const galleryImg3 = document.getElementById('galleryImg3');
            if (galleryImg3) galleryImg3.src = galleryImagesArray[3] || trip.image;
            
            const galleryImg4 = document.getElementById('galleryImg4');
            if (galleryImg4) galleryImg4.src = galleryImagesArray[4] || trip.image;
            
            // Update "more photos" count if we have gallery images
            const morePhotosOverlay = document.querySelector('.gallery-overlay span');
            if (morePhotosOverlay && trip.galleryImages && trip.galleryImages.length > 4) {
                morePhotosOverlay.textContent = `+${trip.galleryImages.length - 4} More`;
            }

            // Update Trek at a Glance
            const glanceDuration = document.getElementById('glanceDuration');
            if (glanceDuration) glanceDuration.textContent = trip.duration || '2 days / 1 night';
            
            const glanceDifficulty = document.getElementById('glanceDifficulty');
            if (glanceDifficulty) glanceDifficulty.textContent = trip.difficulty || 'Moderate';
            
            const glanceAltitude = document.getElementById('glanceAltitude');
            if (glanceAltitude) glanceAltitude.textContent = trip.elevation || '4640 ft';
            
            const glanceLocation = document.getElementById('glanceLocation');
            if (glanceLocation) glanceLocation.textContent = trip.location ? trip.location.split(',')[0] : 'Western Ghats';
            
            const glanceDistance = document.getElementById('glanceDistance');
            if (glanceDistance) glanceDistance.textContent = trip.distance || '12 km';
            
            const glanceAge = document.getElementById('glanceAge');
            if (glanceAge) glanceAge.textContent = trip.ageRange || '12+';
            
            const glanceGroupSize = document.getElementById('glanceGroupSize');
            if (glanceGroupSize) glanceGroupSize.textContent = trip.groupSize || '20 pax';
            
            const glanceBestTime = document.getElementById('glanceBestTime');
            if (glanceBestTime) glanceBestTime.textContent = trip.bestTime || 'Oct - Feb';

            // Update location
            const locationEl = document.getElementById('tripLocation');
            if (locationEl) locationEl.textContent = trip.location;

            // Update badge
            const badgeEl = document.getElementById('tripBadge');
            if (badgeEl) badgeEl.textContent = trip.badge;

            // Update price
            const priceEl = document.getElementById('tripPrice');
            if (priceEl) priceEl.textContent = trip.price;

            // Update overview cards
            const overviewCards = document.querySelectorAll('.overview-card');
            if (overviewCards.length >= 4) {
                overviewCards[0].querySelector('.value').textContent = trip.distance;
                overviewCards[1].querySelector('.value').textContent = trip.elevation;
                overviewCards[2].querySelector('.value').textContent = trip.difficulty;
                overviewCards[3].querySelector('.value').textContent = trip.bestTime;
            }

            // Update About section
            const aboutSection = document.querySelector('.content-section p');
            if (aboutSection && trip.about) {
                const aboutContainer = aboutSection.parentElement;
                const paragraphs = trip.about.split('\n\n');
                aboutSection.textContent = paragraphs[0];
                if (paragraphs[1]) {
                    let secondP = aboutContainer.querySelectorAll('p')[1];
                    if (secondP) secondP.textContent = paragraphs[1];
                }
            }

            // Update Highlights
            const highlightsList = document.querySelector('.highlights-list');
            if (highlightsList && trip.highlights) {
                highlightsList.innerHTML = trip.highlights.map(h => 
                    `<li><i class="fas fa-check-circle"></i> ${h}</li>`
                ).join('');
            }

            // Update Itinerary
            const accordionContainer = document.querySelector('.itinerary-accordion');
            if (accordionContainer && trip.itinerary) {
                accordionContainer.innerHTML = trip.itinerary.map((day, index) => `
                    <div class="accordion-item ${index === 0 ? 'active' : ''}">
                        <div class="accordion-header">
                            <span class="day-badge">${day.day}</span>
                            <h3>${day.title}</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <ul>
                                ${day.activities.map(a => `<li>${a}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `).join('');
                
                // Re-attach accordion event listeners
                document.querySelectorAll('.accordion-header').forEach(header => {
                    header.addEventListener('click', () => {
                        const item = header.parentElement;
                        const isActive = item.classList.contains('active');
                        document.querySelectorAll('.accordion-item').forEach(i => i.classList.remove('active'));
                        if (!isActive) item.classList.add('active');
                    });
                });
            }

            // Update Includes
            const includesBox = document.querySelector('.includes-box ul');
            if (includesBox && trip.includes) {
                includesBox.innerHTML = trip.includes.map(i => `<li>${i}</li>`).join('');
            }

            // Update Excludes
            const excludesBox = document.querySelector('.excludes-box ul');
            if (excludesBox && trip.excludes) {
                excludesBox.innerHTML = trip.excludes.map(e => `<li>${e}</li>`).join('');
            }

            // Update WhatsApp link
            const whatsappLink = document.querySelector('.quick-contact .btn-whatsapp');
            if (whatsappLink) {
                whatsappLink.href = `https://wa.me/7019235581?text=Hi!%20I'm%20interested%20in%20${encodeURIComponent(trip.title)}`;
            }

            // Update floating WhatsApp link
            const floatingWhatsapp = document.getElementById('whatsappLink');
            if (floatingWhatsapp) {
                floatingWhatsapp.href = `https://wa.me/7019235581?text=Hi!%20I'm%20interested%20in%20${encodeURIComponent(trip.title)}`;
            }

            // ============================================
            // COMMON SECTIONS - Use trip-specific overrides OR common defaults
            // Pattern: trip.fieldName overrides commonFieldName if defined and has data
            // ============================================

            // Update Pickup Points Table
            const pickupTable = document.querySelector('#pickupTable tbody');
            if (pickupTable) {
                // Use trip-specific boardingLocations ONLY if it has valid entries (name & time)
                const hasValidBoardingLocations = trip.boardingLocations && 
                    trip.boardingLocations.length > 0 && 
                    trip.boardingLocations.some(p => p.name && p.time);
                
                const pickupPoints = hasValidBoardingLocations 
                    ? trip.boardingLocations 
                    : (typeof commonPickupPoints !== 'undefined' ? commonPickupPoints : []);
                
                pickupTable.innerHTML = pickupPoints.map(point => `
                    <tr>
                        <td><strong>${point.name || ''}</strong></td>
                        <td>${point.landmark || ''}</td>
                        <td><span class="pickup-time">${point.time || ''}</span></td>
                        <td>${point.mapLink ? `<a href="${point.mapLink}" target="_blank" class="map-link"><i class="fas fa-map-marker-alt"></i> View</a>` : ''}</td>
                    </tr>
                `).join('');
            }

            // Update Cancellation Policy Cards
            const policyCards = document.getElementById('policyCards');
            if (policyCards) {
                // Use trip-specific cancellationPolicy if defined, otherwise common
                const cancellationData = (trip.cancellationPolicy && trip.cancellationPolicy.length > 0)
                    ? trip.cancellationPolicy
                    : (typeof commonCancellationPolicy !== 'undefined' ? commonCancellationPolicy : []);
                
                policyCards.innerHTML = cancellationData.map(policy => `
                    <div class="policy-card" style="border-left: 4px solid ${policy.color || '#666'}">
                        <div class="policy-days">${policy.days}</div>
                        <div class="policy-refund" style="color: ${policy.color || '#666'}">Cancellation Fee: ${policy.refund}</div>
                    </div>
                `).join('');
            }

            // Update Guidelines Grid
            const guidelinesGrid = document.getElementById('guidelinesGrid');
            if (guidelinesGrid) {
                // Use trip-specific guidelines if defined, otherwise common
                const guidelinesData = (trip.guidelines && trip.guidelines.length > 0)
                    ? trip.guidelines
                    : (typeof commonGuidelines !== 'undefined' ? commonGuidelines : []);
                
                guidelinesGrid.innerHTML = guidelinesData.map(guideline => `
                    <div class="guideline-item">
                        <div class="guideline-icon"><i class="fas ${guideline.icon || 'fa-info-circle'}"></i></div>
                        <div class="guideline-content">
                            <h4>${guideline.title}</h4>
                            <p>${guideline.desc}</p>
                        </div>
                    </div>
                `).join('');
            }

            // Update FAQ Accordion
            const faqAccordion = document.getElementById('faqAccordion');
            if (faqAccordion) {
                // Use trip-specific FAQs if defined, otherwise common
                const faqData = (trip.faqs && trip.faqs.length > 0)
                    ? trip.faqs
                    : (typeof commonFAQs !== 'undefined' ? commonFAQs : []);
                
                faqAccordion.innerHTML = faqData.map((faq, index) => `
                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFAQ(${index})">
                            <span>${faq.q}</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer" id="faq-${index}">
                            <p>${faq.a}</p>
                        </div>
                    </div>
                `).join('');
            }

            // Update date dropdown with available dates
            const dateSelect = document.getElementById('dateSelect');
            if (dateSelect && trip.availableDates && trip.availableDates.length > 0) {
                dateSelect.innerHTML = '<option value="">Choose a date</option>' + 
                    trip.availableDates.map(date => `<option value="${date}">${date}</option>`).join('');
            }

            // Update booking sidebar prices and meta
            const priceNum = parseInt(trip.price.replace(/[₹,]/g, ''));
            const originalPrice = Math.round(priceNum * 1.28); // Calculate ~22% higher as original
            const discount = Math.round((1 - priceNum / originalPrice) * 100);
            document.getElementById('originalPrice').textContent = '₹' + originalPrice.toLocaleString('en-IN');
            document.getElementById('currentPrice').textContent = trip.price;
            document.getElementById('discountBadge').textContent = discount + '% OFF';
            document.getElementById('totalAmount').textContent = trip.price;
            // Store price for calculations
            window.tripPrice = priceNum;
            // Update total when people count changes
            document.getElementById('peopleCount').addEventListener('change', updateTotal);
            updateTotal();
        }
        function updateTotal() {
            const people = parseInt(document.getElementById('peopleCount').value) || 1;
            const total = window.tripPrice * people;
            document.getElementById('totalAmount').textContent = '₹' + total.toLocaleString('en-IN');
        }
        function goToCheckout(e) {
            e.preventDefault();
            const tripId = getTripFromURL();
            const dateSelect = document.getElementById('dateSelect');
            const peopleSelect = document.getElementById('peopleCount');
            const date = dateSelect ? dateSelect.value : '';
            const people = peopleSelect ? peopleSelect.value : 1;
            
            // Validate date is selected
            if (!date) {
                alert('Please select a date for your trip');
                dateSelect.focus();
                dateSelect.classList.add('error');
                return false;
            }
            
            dateSelect.classList.remove('error');
            const checkoutUrl = `checkout.html?trip=${tripId}&date=${encodeURIComponent(date)}&people=${people}`;
            window.location.href = checkoutUrl;
            return false;
        }

        // FAQ Toggle Function
        function toggleFAQ(index) {
            const answer = document.getElementById(`faq-${index}`);
            const item = answer.parentElement;
            const icon = item.querySelector('.faq-question i');
            
            // Close all other FAQs
            document.querySelectorAll('.faq-item').forEach((faq, i) => {
                if (i !== index) {
                    faq.classList.remove('active');
                    const otherAnswer = document.getElementById(`faq-${i}`);
                    if (otherAnswer) otherAnswer.style.maxHeight = null;
                }
            });
            
            // Toggle current FAQ
            item.classList.toggle('active');
            if (item.classList.contains('active')) {
                answer.style.maxHeight = answer.scrollHeight + 'px';
            } else {
                answer.style.maxHeight = null;
            }
        }

        // Gallery Lightbox Functions
        let currentImageIndex = 0;
        let galleryImages = [];

        function openLightbox(index) {
            const lightbox = document.getElementById('galleryLightbox');
            const lightboxImg = document.getElementById('lightboxImage');
            const counter = document.getElementById('imageCounter');
            
            currentImageIndex = index;
            // Use all gallery images stored globally (includes all 12+ images)
            galleryImages = window.allGalleryImages || Array.from(document.querySelectorAll('.gallery-item img')).map(img => img.src);
            
            lightboxImg.src = galleryImages[currentImageIndex];
            counter.textContent = `${currentImageIndex + 1} / ${galleryImages.length}`;
            lightbox.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeLightbox() {
            const lightbox = document.getElementById('galleryLightbox');
            lightbox.classList.remove('active');
            document.body.style.overflow = '';
        }

        function changeImage(direction) {
            currentImageIndex += direction;
            if (currentImageIndex < 0) currentImageIndex = galleryImages.length - 1;
            if (currentImageIndex >= galleryImages.length) currentImageIndex = 0;
            
            const lightboxImg = document.getElementById('lightboxImage');
            const counter = document.getElementById('imageCounter');
            lightboxImg.src = galleryImages[currentImageIndex];
            counter.textContent = `${currentImageIndex + 1} / ${galleryImages.length}`;
        }

        // Keyboard navigation for lightbox
        document.addEventListener('keydown', function(e) {
            const lightbox = document.getElementById('galleryLightbox');
            if (!lightbox || !lightbox.classList.contains('active')) return;
            
            if (e.key === 'Escape') closeLightbox();
            if (e.key === 'ArrowLeft') changeImage(-1);
            if (e.key === 'ArrowRight') changeImage(1);
        });

        document.addEventListener('DOMContentLoaded', updateTripPage);
    </script>
    <script src="js/security.js"></script>
</body>
</html>
